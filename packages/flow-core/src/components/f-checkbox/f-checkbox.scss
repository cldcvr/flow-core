@use "sass:map";
// common mixins imported from this file
@import "./../../mixins/scss/mixins";

$states: (
  "primary": (
    "background": var(--color-primary-default),
  ),
  "default": (
    "background": var(--color-primary-default),
  ),
  "success": (
    "background": var(--color-success-default),
  ),
  "warning": (
    "background": var(--color-warning-default),
  ),
  "danger": (
    "background": var(--color-danger-default),
  ),
  "inherit": (
    "background": var(--color-checkbox-default),
  ),
);

$sizes: (
  "small": (
    "height": 10px,
    "width": 9px,
  ),
  "medium": (
    "height": 14px,
    "width": 12px,
  ),
);

:host {
  height: fit-content;
  .f-checkbox {
    border: 0px;
    /* clip: rect(0px, 0px, 0px, 0px); */
    height: 0px;
    width: 0px;
    overflow: hidden;
    padding: 0px;
    position: absolute;
  }

  .f-checkbox-wrapper {
    @include base();

    input[checked="true"] + label > svg {
      height: var(--form-checkbox-width);
      animation: draw-checkbox ease-in-out 0.4s forwards;
      -webkit-animation: draw-checkbox ease-in-out 0.4s forwards;
    }

    @each $size, $value in $sizes {
      &[size="#{$size}"] {
        input[checked="true"] + label > svg {
          height: map.get($value, "width");
        }
      }
    }

    label:active::after {
      // background-color: var(--color-checkbox-default);
      // outline: 2px solid var(--color-checkbox-default);
      outline-offset: 4px;
    }

    label {
      color: var(--color-text-default);
      line-height: 40px;
      cursor: pointer;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      &:after {
        content: "";
        height: var(--form-checkbox-size);
        width: var(--form-checkbox-size);
        float: left;
        border: 1px solid var(--color-text-default);
        border-radius: 2px;
      }
      @each $size, $value in $sizes {
        &[size="#{$size}"] {
          &:after {
            height: map.get($value, "height");
            width: map.get($value, "height");
          }
        }
      }

      @each $state, $color in $states {
        &[state="#{$state}"][value="checked"] {
          &:after {
            border: 1px solid map.get($color, "background");
            transition: 0.15s all ease-out;
            background-color: map.get($color, "background");
          }
        }
        &[state="#{$state}"][value="indeterminate"] {
          &:after {
            border: 1px solid map.get($color, "background");
            transition: 0.15s all ease-out;
            background-color: map.get($color, "background");
          }
        }
      }
    }
    svg {
      stroke: var(--color-surface-default);
      stroke-width: 3px;
      height: 0px;
      width: var(--form-checkbox-width);
      position: absolute;
      align-items: center;
      display: flex;
      justify-content: center;
      stroke-dasharray: 33;
    }
    @each $size, $value in $sizes {
      &[size="#{$size}"] {
        svg {
          width: map.get($value, "width");
        }
      }
    }
  }

  @keyframes draw-checkbox {
    0% {
      stroke-dashoffset: 33;
    }
    100% {
      stroke-dashoffset: 0;
    }
  }
}
